@page "/chart/smart-labels"

@using Syncfusion.Blazor
@using ThemeHelper
@using Syncfusion.Blazor.Charts

@inject NavigationManager NavigationManager
@*Hidden:Lines*@
@inherits SampleBaseComponent


@*End:Hidden*@

<SampleDescription>
    <p>This sample shows the gold medal count scored by each country at the Rio Olympic Games using smart labels on the chart.</p>
</SampleDescription>
<ActionDescription>
    <p>In this example, you can see how the labels can be arranged smartly without overlapping. You can use the <a target='_blank' href='https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Charts.SfAccumulationChart.html#Syncfusion_Blazor_Charts_SfAccumulationChart_EnableSmartLabels' aria-label="Navigate to the EnableSmartLabels property reference for accumulation chart">EnableSmartLabels</a> property to enable or disable the support.</p>
    <p><code>Tooltip</code> is enabled in this example. To see the tooltip in action, hover a point or tap on a point in touch enabled devices.</p>
    <p>More information on the smart labels can be found in this <a target='_blank' href='https://blazor.syncfusion.com/documentation/accumulation-chart/data-label/#smart-labels' aria-label="Navigate to the documentation for smart-labels in accumulation chart component">documentation section</a>.</p>
</ActionDescription>

<div class="control-section">
    <SfAccumulationChart EnableBorderOnMouseMove="false" Title="Rio Olympics Gold" EnableSmartLabels="true" Theme="@Theme">
        <AccumulationChartLegendSettings Visible="false"></AccumulationChartLegendSettings>
        <AccumulationChartTooltipSettings Header="" Enable="true" Format="<b>${point.x}</b><br> Gold Medals: <b>${point.y}</b>"></AccumulationChartTooltipSettings>
        <AccumulationChartSeriesCollection>
            <AccumulationChartSeries DataSource="@PieChartPoints" Name="RIO" XName="Country" YName="Medal" StartAngle="60" Radius="@Radius" InnerRadius="0%">
                <AccumulationDataLabelSettings TextWrap="@Wrap" MaxWidth="@Width" Name="DataLabelMappingName" Visible="true" Position="AccumulationLabelPosition.Outside">
                    <AccumulationChartConnector Length=@ConnectorLength Type="ConnectorType.Curve"></AccumulationChartConnector>
                    <AccumulationChartDataLabelFont FontWeight="600" Size=@Size></AccumulationChartDataLabelFont>
                </AccumulationDataLabelSettings>
            </AccumulationChartSeries>
        </AccumulationChartSeriesCollection>
    </SfAccumulationChart>
</div>

@code{
    
    private string Radius { get; set; } = "65%";
    private Theme Theme { get; set; }
    public TextWrap Wrap { get; set; } = TextWrap.Normal;
    public double Width { get; set; } = double.NaN;
    public string ConnectorLength { get; set; } = "20px";
    public string Size { get; set; } = "12px";
    public List<PieData> PieChartPoints { get; set; } = new List<PieData>
    {
        new PieData { Country = "USA", Medal = 46, DataLabelMappingName = "United States of America: 46" },
        new PieData { Country = "China", Medal = 26, DataLabelMappingName = "China: 26" },
        new PieData { Country = "Russia", Medal = 19, DataLabelMappingName = "Russia: 19" },
        new PieData { Country = "Germany", Medal = 17, DataLabelMappingName = "Germany: 17" },
        new PieData { Country = "Japan", Medal = 12, DataLabelMappingName = "Japan: 12"  },
        new PieData { Country = "France", Medal = 10, DataLabelMappingName = "France: 10" },
        new PieData { Country = "South Korea", Medal = 9, DataLabelMappingName = "South Korea: 9" },
        new PieData { Country = "Great Britain", Medal = 27, DataLabelMappingName = "Great Britain: 27" },
        new PieData { Country = "Italy", Medal = 8, DataLabelMappingName = "Italy: 8" },
        new PieData { Country = "Australia", Medal = 8, DataLabelMappingName = "Australia: 8" },
        new PieData { Country = "Netherlands", Medal = 8, DataLabelMappingName = "Netherlands: 8" },
        new PieData { Country = "NewZealand", Medal = 4, DataLabelMappingName = "New Zealand: 4" },
        new PieData { Country = "Uzbekistan", Medal = 4, DataLabelMappingName = "Uzbekistan: 4" },
        new PieData { Country = "Kazakhstan", Medal = 3, DataLabelMappingName = "Kazakhstan: 3" },
        new PieData { Country = "Colombia", Medal = 3, DataLabelMappingName = "Colombia: 3" },
        new PieData { Country = "Switzerland", Medal = 3, DataLabelMappingName = "Switzerland: 3" },
        new PieData { Country = "Argentina", Medal = 3, DataLabelMappingName = "Argentina: 3" },
        new PieData { Country = "South Africa", Medal = 2, DataLabelMappingName = "South Africa: 2" },
        new PieData { Country = "North Korea", Medal = 2, DataLabelMappingName = "North Korea: 2" },
    };

    protected override void OnInitialized()
    {
        
        Theme = ThemeHelper.GetCurrentTheme(NavigationManager.Uri);
        if(SampleService.IsDevice)
        {
            Radius = "40%";
            Wrap = TextWrap.Wrap;
            Width = 55;
            PieChartPoints[0].DataLabelMappingName = "USA: 46";
            PieChartPoints[9].DataLabelMappingName = "AU: 8";
            PieChartPoints[10].DataLabelMappingName = "NL: 8";
            PieChartPoints[5].DataLabelMappingName = "FR: 10";
            PieChartPoints[6].DataLabelMappingName = "KR: 9";
            PieChartPoints[7].DataLabelMappingName = "GB: 27";
            PieChartPoints[18].DataLabelMappingName = "KP: 2";
            PieChartPoints[3].DataLabelMappingName = "DE: 17";
            PieChartPoints[11].DataLabelMappingName = "NZ: 4";
            PieChartPoints[12].DataLabelMappingName = "UZB: 4";
            PieChartPoints[13].DataLabelMappingName = "KZ: 3";
            PieChartPoints[14].DataLabelMappingName = "CO: 3";
            PieChartPoints[15].DataLabelMappingName = "CH: 3";
            PieChartPoints[16].DataLabelMappingName = "AR: 3";
            PieChartPoints[17].DataLabelMappingName = "ZA: 2";
            PieChartPoints[18].DataLabelMappingName = "KP: 2";

            ConnectorLength = "2px";
            Size = "7px";
        }
    }

    public class PieData
    {
        public string Country { get; set; }
        public double Medal { get; set; }
        public string DataLabelMappingName { get; set; }
    }
}
